{"ast":null,"code":"// Generated by CoffeeScript 2.3.2\n// # CSV Parse Sync\n// Provides a synchronous alternative to the CSV parser.\n// ## Usage\n// `const records = parse(data, [options]`\nvar StringDecoder, parse;\n\nvar _require = require('string_decoder');\n\nStringDecoder = _require.StringDecoder;\nparse = require('./index');\n\nmodule.exports = function (data) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var chunks, decoder, err, parser;\n  chunks = options.objname ? {} : [];\n\n  if (data instanceof Buffer) {\n    decoder = new StringDecoder();\n    data = decoder.write(data);\n  }\n\n  parser = new parse.Parser(options);\n\n  parser.push = function (chunk) {\n    if (options.objname) {\n      return chunks[chunk[0]] = chunk[1];\n    } else {\n      return chunks.push(chunk);\n    }\n  };\n\n  err = parser.__write(data, false);\n\n  if (err) {\n    throw err;\n  }\n\n  if (data instanceof Buffer) {\n    err = parser.__write(data.end(), true);\n\n    if (err) {\n      throw err;\n    }\n  }\n\n  err = parser.__flush();\n\n  if (err) {\n    throw err;\n  }\n\n  return chunks;\n};","map":null,"metadata":{},"sourceType":"script"}