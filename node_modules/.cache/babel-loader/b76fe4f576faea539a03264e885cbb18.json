{"ast":null,"code":"import _classCallCheck from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _slicedToArray from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/isaac/Desktop/sheets-roll/src/App.js\";\nimport React, { Component } from 'react';\nimport parse from 'csv-parse';\nimport { sum, times } from 'lodash/fp';\nvar BACKGROUNDS = 'https://docs.google.com/spreadsheets/d/e' + '/2PACX-1vQ-Gk5zIkpo2A9AwhSQKnCEprv-g2vk7vHP8qWxJFm-c6osL00jvjtR8gsCbxwlthulAJh3f5mXqSPk/pub?gid=153117320&single=true&output=csv';\nvar STARTING_GEAR = 'https://docs.google.com/spreadsheets/d/e' + '/2PACX-1vQ-Gk5zIkpo2A9AwhSQKnCEprv-g2vk7vHP8qWxJFm-c6osL00jvjtR8gsCbxwlthulAJh3f5mXqSPk/pub?gid=1613277797&single=true&output=csv';\nvar NAMES = 'https://docs.google.com/spreadsheets/d/e' + '/2PACX-1vQ-Gk5zIkpo2A9AwhSQKnCEprv-g2vk7vHP8qWxJFm-c6osL00jvjtR8gsCbxwlthulAJh3f5mXqSPk/pub?gid=674498928&single=true&output=csv';\n\nvar roll = function roll(size) {\n  return Math.floor(Math.random() * size) + 1;\n};\n\nvar rollDice = function rollDice(numberOfDice) {\n  return function (sides) {\n    return sum(times(function () {\n      return roll(sides);\n    }, numberOfDice));\n  };\n};\n\nvar rollStat = function rollStat() {\n  return rollDice(2)(6) + 3;\n};\n\nvar bonus = function bonus(stat) {\n  return Math.floor(stat / 3) - 3;\n};\n\nvar formatBonus = function formatBonus(bonus) {\n  if (bonus >= 0) return \"+\".concat(bonus);\n  return \"\".concat(bonus);\n};\n\nvar formatStatBonus = function formatStatBonus(stat) {\n  return formatBonus(bonus(stat));\n};\n\nvar pick = function pick(array) {\n  return array[Math.floor(Math.random() * array.length)];\n};\n\nvar csvParser = function csvParser() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    columns: true,\n    cast: true\n  };\n  return function (input) {\n    return new Promise(function (resolve, reject) {\n      parse(input, options, function (err, output) {\n        if (err) return reject(err);\n        resolve(output);\n      });\n    });\n  };\n};\n\nvar fetchCsvData =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(url) {\n    var data, text, parsedData;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(url);\n\n          case 2:\n            data = _context.sent;\n            _context.next = 5;\n            return data.text();\n\n          case 5:\n            text = _context.sent;\n            _context.next = 8;\n            return csvParser()(text);\n\n          case 8:\n            parsedData = _context.sent;\n            return _context.abrupt(\"return\", parsedData);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function fetchCsvData(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar fetchData =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var backgrounds, startingGear, names;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetchCsvData(BACKGROUNDS);\n\n          case 2:\n            backgrounds = _context2.sent;\n            _context2.next = 5;\n            return fetchCsvData(STARTING_GEAR);\n\n          case 5:\n            startingGear = _context2.sent;\n            _context2.next = 8;\n            return fetchCsvData(NAMES);\n\n          case 8:\n            names = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              backgrounds: backgrounds,\n              startingGear: startingGear,\n              names: names\n            });\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  return function fetchData() {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar splitRegExp = /(?![^)(]*\\([^)(]*?\\)\\)),(?![^\\(]*\\))/;\n\nvar selectEquipment = function selectEquipment(startingGear) {\n  return function (r1, r2, r3, r4) {\n    return _toConsumableArray(startingGear[r1 - 1]['Weapon'].split(splitRegExp)).concat(_toConsumableArray(startingGear[r2 - 1]['Armour'].split(splitRegExp)), _toConsumableArray(startingGear[r3 - 1]['Item'].split(splitRegExp)), [\"\".concat(r4, \" pennies\")]);\n  };\n};\n\nvar selectName = function selectName(names) {\n  var givenName = pick(names)['Given name'];\n\n  if (givenName === '[Roll on surnames]') {\n    givenName = pick(names)['Surname'];\n    console.log('picked from surname', givenName);\n  }\n\n  var familyName = pick(names)['Surname'];\n\n  if (familyName === '[Roll on given names]') {\n    familyName = pick(names)['Given name'];\n    console.log('picked from given', familyName);\n  }\n\n  return \"\".concat(givenName, \" \").concat(familyName);\n};\n\nvar rollStats = function rollStats() {\n  var stats = {\n    str: rollStat(),\n    dex: rollStat(),\n    con: rollStat(),\n    int: rollStat(),\n    wis: rollStat(),\n    cha: rollStat()\n  };\n\n  var _Object$entries$reduc = Object.entries(stats).reduce(function (_ref3, _ref4) {\n    var _ref5 = _slicedToArray(_ref3, 2),\n        accKey = _ref5[0],\n        accValue = _ref5[1];\n\n    var _ref6 = _slicedToArray(_ref4, 2),\n        key = _ref6[0],\n        value = _ref6[1];\n\n    if (value < accValue) {\n      return [key, value];\n    }\n\n    return [accKey, accValue];\n  }, ['', Infinity]),\n      _Object$entries$reduc2 = _slicedToArray(_Object$entries$reduc, 2),\n      lowestStatKey = _Object$entries$reduc2[0],\n      lowestStatValue = _Object$entries$reduc2[1];\n\n  stats[lowestStatKey] = Math.max(lowestStatValue, rollStat());\n  return stats;\n};\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loaded: false,\n      name: '',\n      items: [],\n      failedCareer: null,\n      stats: {\n        str: 10,\n        dex: 10,\n        con: 10,\n        int: 10,\n        wis: 10,\n        cha: 10\n      }\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetchData().then(function (_ref7) {\n        var backgrounds = _ref7.backgrounds,\n            startingGear = _ref7.startingGear,\n            names = _ref7.names;\n        console.log(backgrounds, startingGear);\n        var equipRoll1 = roll(10);\n        var equipRoll2 = roll(10);\n        var equipRoll3 = roll(10);\n        var equipRoll4 = roll(10);\n        var career = pick(backgrounds);\n\n        _this2.setState({\n          loaded: true,\n          stats: rollStats(),\n          name: selectName(names),\n          failedCareer: career['Failed career'],\n          items: [career['Item 1'], career['Item 2'], '------', 'Torches', 'Box of matches', 'Rations', 'Rations', '------', \"Equipment rolls: \".concat(equipRoll1, \", \").concat(equipRoll2, \", \").concat(equipRoll3, \", \").concat(equipRoll4), '------'].concat(_toConsumableArray(selectEquipment(startingGear)(equipRoll1, equipRoll2, equipRoll3, equipRoll4)))\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          loaded = _this$state.loaded,\n          items = _this$state.items,\n          failedCareer = _this$state.failedCareer,\n          name = _this$state.name,\n          stats = _this$state.stats;\n\n      if (!loaded) {\n        return React.createElement(\"div\", {\n          className: \"App\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, \"Loading...\"));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"character\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, name), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, failedCareer)), React.createElement(\"div\", {\n        className: \"detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"detail-col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"detail-col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      })), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"Stats\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \"Str: \", stats.str, \" (\", formatStatBonus(stats.str), \")\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"Dex: \", stats.dex, \" (\", formatStatBonus(stats.dex), \")\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Con: \", stats.con, \" (\", formatStatBonus(stats.con), \")\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"Int: \", stats.int, \" (\", formatStatBonus(stats.int), \")\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Wis: \", stats.wis, \" (\", formatStatBonus(stats.wis), \")\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"Cha: \", stats.cha, \" (\", formatStatBonus(stats.cha), \")\")), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"Attack: 11\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"HP: \", stats.con - 4), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, \"Move: \", 12 + bonus(stats.dex)), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Stealth: \", 5 + bonus(stats.dex)), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Initiative: \", stats.wis), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Inventory slots: \", stats.str)), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, \"Gear\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, items.map(function (item, i) {\n        return React.createElement(\"li\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, item);\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/isaac/Desktop/sheets-roll/src/App.js"],"names":["React","Component","parse","sum","times","BACKGROUNDS","STARTING_GEAR","NAMES","roll","size","Math","floor","random","rollDice","numberOfDice","sides","rollStat","bonus","stat","formatBonus","formatStatBonus","pick","array","length","csvParser","options","columns","cast","input","Promise","resolve","reject","err","output","fetchCsvData","url","fetch","data","text","parsedData","fetchData","backgrounds","startingGear","names","splitRegExp","selectEquipment","r1","r2","r3","r4","split","selectName","givenName","console","log","familyName","rollStats","stats","str","dex","con","int","wis","cha","Object","entries","reduce","accKey","accValue","key","value","Infinity","lowestStatKey","lowestStatValue","max","App","state","loaded","name","items","failedCareer","then","equipRoll1","equipRoll2","equipRoll3","equipRoll4","career","setState","map","item","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport parse from 'csv-parse';\nimport { sum, times } from 'lodash/fp';\n\nconst BACKGROUNDS = 'https://docs.google.com/spreadsheets/d/e' +\n    '/2PACX-1vQ-Gk5zIkpo2A9AwhSQKnCEprv-g2vk7vHP8qWxJFm-c6osL00jvjtR8gsCbxwlthulAJh3f5mXqSPk/pub?gid=153117320&single=true&output=csv';\nconst STARTING_GEAR = 'https://docs.google.com/spreadsheets/d/e' +\n    '/2PACX-1vQ-Gk5zIkpo2A9AwhSQKnCEprv-g2vk7vHP8qWxJFm-c6osL00jvjtR8gsCbxwlthulAJh3f5mXqSPk/pub?gid=1613277797&single=true&output=csv';\nconst NAMES = 'https://docs.google.com/spreadsheets/d/e' +\n    '/2PACX-1vQ-Gk5zIkpo2A9AwhSQKnCEprv-g2vk7vHP8qWxJFm-c6osL00jvjtR8gsCbxwlthulAJh3f5mXqSPk/pub?gid=674498928&single=true&output=csv';\n\nconst roll = (size) => Math.floor(Math.random() * size) + 1;\nconst rollDice = (numberOfDice) => (sides) => sum(times(() => roll(sides), numberOfDice))\n\nconst rollStat = () => rollDice(2)(6) + 3;\nconst bonus = (stat) => Math.floor(stat / 3) - 3;\n\nconst formatBonus = (bonus) => {\n    if (bonus >= 0) return `+${bonus}`;\n    return `${bonus}`;\n}\n\nconst formatStatBonus = (stat) => formatBonus(bonus(stat));\n\nconst pick = (array) => (\n    array[Math.floor(Math.random() * array.length)]\n);\n\nconst csvParser = (options = { columns: true, cast: true }) => (input) => new Promise((resolve, reject) => {\n    parse(input, options, (err, output) => {\n        if (err) return reject(err);\n        resolve(output);\n    });\n});\n\nconst fetchCsvData = async (url) => {\n    const data = await fetch(url);\n    const text = await data.text();\n    const parsedData = await csvParser()(text);\n\n    return parsedData\n}\n\nconst fetchData = async () => {\n    const backgrounds = await fetchCsvData(BACKGROUNDS);\n    const startingGear = await fetchCsvData(STARTING_GEAR);\n    const names = await fetchCsvData(NAMES);\n\n    return {\n        backgrounds,\n        startingGear,\n        names,\n    }\n}\n\nconst splitRegExp = /(?![^)(]*\\([^)(]*?\\)\\)),(?![^\\(]*\\))/;\n\nconst selectEquipment = (startingGear) => (r1, r2, r3, r4) => ([\n    ...startingGear[r1 - 1]['Weapon'].split(splitRegExp),\n    ...startingGear[r2 - 1]['Armour'].split(splitRegExp),\n    ...startingGear[r3 - 1]['Item'].split(splitRegExp),\n    `${r4} pennies`,\n]);\n\nconst selectName = (names) => {\n    let givenName = pick(names)['Given name'];\n    if (givenName === '[Roll on surnames]') {\n        givenName = pick(names)['Surname']\n        console.log('picked from surname', givenName);\n    }\n\n    let familyName = pick(names)['Surname'];\n    if (familyName === '[Roll on given names]') {\n        familyName = pick(names)['Given name']\n        console.log('picked from given', familyName);\n    }\n\n    return `${givenName} ${familyName}`;\n};\n\nconst rollStats = () => {\n    const stats = {\n        str: rollStat(),\n        dex: rollStat(),\n        con: rollStat(),\n        int: rollStat(),\n        wis: rollStat(),\n        cha: rollStat(),\n    };\n\n    const [lowestStatKey, lowestStatValue] = Object.entries(stats).reduce(([accKey, accValue], [key, value]) => {\n        if (value < accValue) {\n            return [key, value];\n        }\n\n        return [accKey, accValue];\n    }, ['', Infinity]);\n\n\n    stats[lowestStatKey] = Math.max(lowestStatValue, rollStat());\n\n    return stats;\n};\n\nclass App extends Component {\n    state = {\n        loaded: false,\n        name: '',\n        items: [],\n        failedCareer: null,\n        stats: { str: 10, dex: 10, con: 10, int: 10, wis: 10, cha: 10 },\n    }\n\n    componentDidMount() {\n        fetchData().then(({ backgrounds, startingGear, names }) => {\n            console.log(backgrounds, startingGear);\n\n            const equipRoll1 = roll(10);\n            const equipRoll2 = roll(10);\n            const equipRoll3 = roll(10);\n            const equipRoll4 = roll(10);\n\n            const career = pick(backgrounds);\n\n            this.setState({\n                loaded: true,\n                stats: rollStats(),\n                name: selectName(names),\n                failedCareer: career['Failed career'],\n                items: [\n                    career['Item 1'],\n                    career['Item 2'],\n                    '------',\n                    'Torches',\n                    'Box of matches',\n                    'Rations',\n                    'Rations',\n                    '------',\n                    `Equipment rolls: ${equipRoll1}, ${equipRoll2}, ${equipRoll3}, ${equipRoll4}`,\n                    '------',\n                    ...selectEquipment(startingGear)(equipRoll1, equipRoll2, equipRoll3, equipRoll4),\n                ],\n            });\n        });\n    }\n\n    render() {\n        const { loaded, items, failedCareer, name, stats } = this.state;\n\n        if (!loaded) {\n            return (\n                <div className=\"App\">\n                    <h1>Loading...</h1>\n                </div>\n            )\n        }\n\n        return (\n            <div className=\"App\">\n\n                <div className=\"character\">\n                    <h1>{name}</h1>\n                    <h2>{failedCareer}</h2>\n                </div>\n\n                <div className=\"detail\">\n                    <div className=\"detail-col\">\n\n                    </div>\n\n                    <div className=\"detail-col\">\n\n                    </div>\n                </div>\n\n                <h3>Stats</h3>\n\n                <ul>\n                    <li>Str: {stats.str} ({formatStatBonus(stats.str)})</li>\n                    <li>Dex: {stats.dex} ({formatStatBonus(stats.dex)})</li>\n                    <li>Con: {stats.con} ({formatStatBonus(stats.con)})</li>\n                    <li>Int: {stats.int} ({formatStatBonus(stats.int)})</li>\n                    <li>Wis: {stats.wis} ({formatStatBonus(stats.wis)})</li>\n                    <li>Cha: {stats.cha} ({formatStatBonus(stats.cha)})</li>\n                </ul>\n\n                <ul>\n                    <li>Attack: 11</li>\n                    <li>HP: {stats.con - 4}</li>\n                    <li>Move: {12 + bonus(stats.dex)}</li>\n                    <li>Stealth: {5 + bonus(stats.dex)}</li>\n                    <li>Initiative: {stats.wis}</li>\n                    <li>Inventory slots: {stats.str}</li>\n                </ul>\n\n                <h3>Gear</h3>\n\n                <ul>\n                    {items.map((item, i) => (\n                        <li key={i}>{item}</li>\n                    ))}\n                </ul>\n            </div>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}