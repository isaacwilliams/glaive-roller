{"ast":null,"code":"import _classCallCheck from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _toConsumableArray from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/isaac/Desktop/sheets-roll/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/isaac/Desktop/sheets-roll/src/App.js\";\nimport React, { Component } from 'react';\nimport parse from 'csv-parse';\nvar BACKGROUNDS = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ-Gk5zIkpo2A9AwhSQKnCEprv-g2vk7vHP8qWxJFm-c6osL00jvjtR8gsCbxwlthulAJh3f5mXqSPk/pub?gid=153117320&single=true&output=csv';\nvar STARTING_GEAR = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ-Gk5zIkpo2A9AwhSQKnCEprv-g2vk7vHP8qWxJFm-c6osL00jvjtR8gsCbxwlthulAJh3f5mXqSPk/pub?gid=1613277797&single=true&output=csv';\n\nvar roll = function roll(size) {\n  return Math.floor(Math.random() * size) + 1;\n};\n\nvar pick = function pick(array) {\n  return array[Math.floor(Math.random() * array.length)];\n};\n\nvar csvParser = function csvParser() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    columns: true,\n    cast: true\n  };\n  return function (input) {\n    return new Promise(function (resolve, reject) {\n      parse(input, options, function (err, output) {\n        if (err) return reject(err);\n        resolve(output);\n      });\n    });\n  };\n};\n\nvar fetchCsvData =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(url) {\n    var data, text, parsedData;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(url);\n\n          case 2:\n            data = _context.sent;\n            _context.next = 5;\n            return data.text();\n\n          case 5:\n            text = _context.sent;\n            _context.next = 8;\n            return csvParser()(text);\n\n          case 8:\n            parsedData = _context.sent;\n            return _context.abrupt(\"return\", parsedData);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function fetchCsvData(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar fetchData =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var backgrounds, startingGear;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetchCsvData(BACKGROUNDS);\n\n          case 2:\n            backgrounds = _context2.sent;\n            _context2.next = 5;\n            return fetchCsvData(STARTING_GEAR);\n\n          case 5:\n            startingGear = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              backgrounds: backgrounds,\n              startingGear: startingGear\n            });\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  return function fetchData() {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar splitRegExp = /(?![^)(]*\\([^)(]*?\\)\\)),(?![^\\(]*\\))/;\n\nvar selectEquipment = function selectEquipment(startingGear) {\n  return function (r1, r2, r3, r4) {\n    return _toConsumableArray(startingGear[r1]['Weapon'].split(splitRegExp)).concat(_toConsumableArray(startingGear[r2]['Armour'].split(splitRegExp)), _toConsumableArray(startingGear[r4]['Item'].split(splitRegExp)), [\"\".concat(roll(10), \" pennies\")]);\n  };\n};\n\nvar equipPermutations = function equipPermutations(startingGear) {\n  return function (r1, r2, r3, r4) {\n    return _toConsumableArray(startingGear[r1]['Weapon'].split(splitRegExp)).concat(_toConsumableArray(startingGear[r2]['Armour'].split(splitRegExp)), _toConsumableArray(startingGear[r4]['Item'].split(splitRegExp)), [\"\".concat(roll(10), \" pennies\")]);\n  };\n};\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      items: [],\n      failedCareer: null\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetchData().then(function (_ref3) {\n        var backgrounds = _ref3.backgrounds,\n            startingGear = _ref3.startingGear;\n        console.log(backgrounds, startingGear);\n        var equipRoll1 = roll(10);\n        var equipRoll2 = roll(10);\n        var equipRoll3 = roll(10);\n        var equipRoll4 = roll(10);\n        var career = pick(backgrounds);\n\n        _this2.setState({\n          failedCareer: career['Failed career'],\n          items: [career['Item 1'], career['Item 2'], '------', \"Rolls: \".concat(equipRoll1, \", \").concat(equipRoll2, \", \").concat(equipRoll3, \", \").concat(equipRoll4), '------'].concat(_toConsumableArray(selectEquipment(startingGear)(equipRoll1, equipRoll2, equipRoll3, equipRoll4)), ['--- or ---'], _toConsumableArray(selectEquipment(startingGear)(equipRoll2, equipRoll1, equipRoll3, equipRoll4)), ['--- or ---'], _toConsumableArray(selectEquipment(startingGear)(equipRoll3, equipRoll1, equipRoll2, equipRoll4)))\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          items = _this$state.items,\n          failedCareer = _this$state.failedCareer;\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, failedCareer), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, items.map(function (item, i) {\n        return React.createElement(\"li\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, item);\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/isaac/Desktop/sheets-roll/src/App.js"],"names":["React","Component","parse","BACKGROUNDS","STARTING_GEAR","roll","size","Math","floor","random","pick","array","length","csvParser","options","columns","cast","input","Promise","resolve","reject","err","output","fetchCsvData","url","fetch","data","text","parsedData","fetchData","backgrounds","startingGear","splitRegExp","selectEquipment","r1","r2","r3","r4","split","equipPermutations","App","state","items","failedCareer","then","console","log","equipRoll1","equipRoll2","equipRoll3","equipRoll4","career","setState","map","item","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport parse from 'csv-parse';\n\nconst BACKGROUNDS = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ-Gk5zIkpo2A9AwhSQKnCEprv-g2vk7vHP8qWxJFm-c6osL00jvjtR8gsCbxwlthulAJh3f5mXqSPk/pub?gid=153117320&single=true&output=csv';\nconst STARTING_GEAR = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ-Gk5zIkpo2A9AwhSQKnCEprv-g2vk7vHP8qWxJFm-c6osL00jvjtR8gsCbxwlthulAJh3f5mXqSPk/pub?gid=1613277797&single=true&output=csv';\n\nconst roll = (size) => Math.floor(Math.random() * size) + 1;\n\nconst pick = (array) => (\n    array[Math.floor(Math.random() * array.length)]\n);\n\nconst csvParser = (options = { columns: true, cast: true }) => (input) => new Promise((resolve, reject) => {\n    parse(input, options, (err, output) => {\n        if (err) return reject(err);\n        resolve(output);\n    });\n});\n\nconst fetchCsvData = async (url) => {\n    const data = await fetch(url);\n    const text = await data.text();\n    const parsedData = await csvParser()(text);\n\n    return parsedData\n}\n\nconst fetchData = async () => {\n    const backgrounds = await fetchCsvData(BACKGROUNDS);\n    const startingGear = await fetchCsvData(STARTING_GEAR);\n\n    return {\n        backgrounds,\n        startingGear,\n    }\n}\n\nconst splitRegExp = /(?![^)(]*\\([^)(]*?\\)\\)),(?![^\\(]*\\))/;\n\nconst selectEquipment = (startingGear) => (r1, r2, r3, r4) => ([\n    ...startingGear[r1]['Weapon'].split(splitRegExp),\n    ...startingGear[r2]['Armour'].split(splitRegExp),\n    ...startingGear[r4]['Item'].split(splitRegExp),\n    `${roll(10)} pennies`,\n]);\n\nconst equipPermutations = (startingGear) => (r1, r2, r3, r4) => ([\n    ...startingGear[r1]['Weapon'].split(splitRegExp),\n    ...startingGear[r2]['Armour'].split(splitRegExp),\n    ...startingGear[r4]['Item'].split(splitRegExp),\n    `${roll(10)} pennies`,\n]);\n\nclass App extends Component {\n    state = { items: [], failedCareer: null }\n\n    componentDidMount() {\n        fetchData().then(({ backgrounds, startingGear }) => {\n            console.log(backgrounds, startingGear);\n\n            const equipRoll1 = roll(10);\n            const equipRoll2 = roll(10);\n            const equipRoll3 = roll(10);\n            const equipRoll4 = roll(10);\n\n            const career = pick(backgrounds);\n\n            this.setState({\n                failedCareer: career['Failed career'],\n                items: [\n                    career['Item 1'],\n                    career['Item 2'],\n                    '------',\n                    `Rolls: ${equipRoll1}, ${equipRoll2}, ${equipRoll3}, ${equipRoll4}`,\n                    '------',\n                    ...selectEquipment(startingGear)(equipRoll1, equipRoll2, equipRoll3, equipRoll4),\n                    '--- or ---',\n                    ...selectEquipment(startingGear)(equipRoll2, equipRoll1, equipRoll3, equipRoll4),\n                    '--- or ---',\n                    ...selectEquipment(startingGear)(equipRoll3, equipRoll1, equipRoll2, equipRoll4),\n                ],\n            });\n        });\n    }\n\n    render() {\n        const { items, failedCareer } = this.state;\n\n        return (\n            <div className=\"App\">\n                <h2>{failedCareer}</h2>\n                <ul>\n                    {items.map((item, i) => (\n                        <li key={i}>{item}</li>\n                    ))}\n                </ul>\n            </div>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}